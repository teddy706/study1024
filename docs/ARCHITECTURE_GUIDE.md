# 아키텍처 정의서 (Architecture Guide)

## 1. 시스템 개요

### 목적
영업사원을 위한 AI 기반 개인 비서 시스템의 기술적 아키텍처 정의

### 범위
- 웹 애플리케이션 아키텍처
- 데이터베이스 설계
- 외부 시스템 연동
- 보안 아키텍처

## 2. 시스템 아키텍처

### 전체 아키텍처 다이어그램
```
┌──────────────────┐      ┌─────────────────┐
│   Client Layer   │      │  Presentation   │
│  - Web Browser   │─────>│  - Retool UI    │
│  - Mobile Web    │      │  - React SPA    │
└──────────────────┘      └─────────────────┘
          │                        │
          │                        │
          ▼                        ▼
┌──────────────────┐      ┌─────────────────┐
│   API Gateway    │      │ Authentication  │
│  - Rate Limiting │─────>│   - Supabase    │
│  - Auth Check    │      │   - JWT         │
└──────────────────┘      └─────────────────┘
          │                        │
          │                        │
          ▼                        ▼
┌──────────────────┐      ┌─────────────────┐
│  Business Layer  │      │    Storage      │
│   - n8n Flows    │─────>│  - Supabase DB  │
│   - AI Services  │      │  - File Storage │
└──────────────────┘      └─────────────────┘
```

## 3. 컴포넌트 상세

### Frontend 컴포넌트
- Retool Dashboard
  - 관리자 인터페이스
  - 데이터 관리 도구
- React SPA
  - 사용자 인터페이스
  - 반응형 디자인

### Backend 컴포넌트
- n8n Workflows
  - 업무 자동화 파이프라인
  - 이벤트 기반 처리
- Supabase
  - 데이터베이스
  - 인증/인가
  - 실시간 기능

### AI/ML 서비스
- Google Vision AI (OCR)
- OpenAI Whisper (STT)
- GPT-4-mini (텍스트 분석)
- Custom ML Models

## 4. 데이터 아키텍처

### 데이터 흐름
1. 데이터 수집
   - OCR 처리
   - 음성 변환
   - 외부 API
2. 데이터 처리
   - 정규화
   - 분석
   - 요약
3. 데이터 저장
   - 구조화 데이터
   - 비구조화 데이터
4. 데이터 제공
   - API
   - 실시간 이벤트
   - 리포트

### 데이터베이스 구조
- 관계형 데이터 (Supabase PostgreSQL)
  - 고객 정보
  - 통화 기록
  - 일정 관리
- 비관계형 데이터
  - 문서 저장소
  - 캐시 시스템

## 5. 통합 아키텍처

### 외부 시스템 연동
- Calendar API
- VoIP 시스템
- 알림 서비스
- 웹 스크래핑

### API 설계
- RESTful API
- WebSocket
- GraphQL (선택적)

## 6. 보안 아키텍처

### 인증/인가
- JWT 기반 인증
- RBAC (Role-Based Access Control)
- OAuth2.0 통합

### 데이터 보안
- 엔드-투-엔드 암호화
- 데이터 암호화 (저장/전송)
- 접근 제어

## 7. 배포 아키텍처

### 인프라 구성
- Render (서버리스)
- Supabase (데이터베이스)
- n8n (워크플로우)

### 확장성
- 자동 스케일링
- 로드 밸런싱
- 캐시 계층

## 8. 모니터링 및 로깅

### 시스템 모니터링
- 성능 메트릭
- 에러 추적
- 사용량 통계

### 로깅 시스템
- 중앙화된 로깅
- 로그 분석
- 알림 설정

## 9. 재해 복구

### 백업 전략
- 데이터베이스 백업
- 설정 백업
- 복구 절차

### 고가용성
- 다중화 구성
- 장애 조치
- 서비스 연속성